<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	    		xmlns:ui="http://java.sun.com/jsf/facelets"
	  			xmlns:h="http://java.sun.com/jsf/html"
	  			xmlns:f="http://java.sun.com/jsf/core"
	  			xmlns:s="http://jboss.com/products/seam/taglib"
                xmlns:a="http://richfaces.org/a4j"
				template="template.xhtml">

<!-- content -->
<ui:define name="content">

<div class="section">
  
    <span class="errors">
       Bem vindo, #{user.nome}
       <br/>
       <br/>
    </span>
    
    <h1>Procurar Projetos</h1>

	<h:form id="searchCriteria">
	<fieldset> 
	   <h:inputText id="searchString" value="#{projetoSearch.searchString}" style="width: 165px;">
         <a:support id="onkeyup" event="onkeyup" actionListener="#{projetoSearch.find}" reRender="searchResults" />
       </h:inputText>
       &#160;
	   <a:commandButton id="findProjects" value="Buscar" action="#{projetoSearch.find}" reRender="searchResults"/>
       &#160;
       <a:status id="status">
          <f:facet id="StartStatus" name="start">
             <h:graphicImage id="SpinnerGif" value="/img/spinner.gif"/>
          </f:facet>
       </a:status>
	   <br/>
       <h:outputLabel id="MaximumResultsLabel" for="pageSize">Maximo por pagina:</h:outputLabel>&#160;
       <h:selectOneMenu id="pageSize" value="#{projetoSearch.pageSize}">
          <f:selectItem id="PageSize5" itemLabel="5" itemValue="5"/>
          <f:selectItem id="PageSize10" itemLabel="10" itemValue="10"/>
          <f:selectItem id="PageSize20" itemLabel="20" itemValue="20"/>
       </h:selectOneMenu>
    </fieldset>
    </h:form>
    
</div>

<a:outputPanel id="searchResults">
  <div class="section">
	<h:outputText id="NoProjectsFoundMessage" value="Nenhum projeto encontrado" rendered="#{projetos != null and projetos.rowCount==0}"/>
	<h:dataTable id="projetos" value="#{projetos}" var="proj" rendered="#{projetos.rowCount>0}">
		<h:column id="column1">
			<f:facet id="NomeFacet" name="header">Nome</f:facet>
			#{proj.nome}
		</h:column>
		<h:column id="column2">
			<f:facet id="ClienteFacet" name="header">Cliente</f:facet>
			#{proj.cliente}
		</h:column>
		<h:column id="column3">
			<f:facet id="LocalizacaoFacet" name="header">Localizacao</f:facet>
			#{proj.localizacao}
		</h:column> 
		<h:column id="column4">
			<f:facet id="DescricaoBreveFacet" name="header">Descricao</f:facet>
			#{proj.descricaoBreve}
		</h:column>
		<h:column id="column5">
			<f:facet id="ActionFacet" name="header">Acao</f:facet>
			<s:link id="viewProjeto" value="Editar Projeto" action="#{participarProjeto.selectProjeto(proj)}"/>
		</h:column>
	</h:dataTable>
	<s:link id="MoreResultsLink" value="Mais resultados" action="#{projetoSearch.nextPage}" rendered="#{projetoSearch.nextPageAvailable}"/>
    &#160;
<h:commandButton id="newProjeto"  value="Novo Projeto"/>
  
  </div>
</a:outputPanel>

<div class="section">
	<h1>Participacao em Projetos</h1>
</div>
<div class="section">
  <h:form id="projetosUsuarios">
	<h:outputText id="NoProjectsFoundMessage" value="Nenhuma participacao em projeto" rendered="#{projetosUsuarios.rowCount==0}"/>
	<h:dataTable id="projetosUsuarios" value="#{projetosUsuarios}" var="participacao" rendered="#{projetosUsuarios.rowCount>0}">
		<h:column id="column1">
			<f:facet id="NomeFacet" name="header">Projeto</f:facet>
			#{participacao.projeto.nome}
		</h:column>
		<h:column id="column2">
			<f:facet id="ClienteFacet" name="header">Cliente</f:facet>
			#{participacao.projeto.cliente}
		</h:column>
		<h:column id="column3">
			<f:facet id="LocalizacaoFacet" name="header">Localizacao</f:facet>
			#{participacao.projeto.localizacao}
		</h:column>
        <h:column id="column4">
            <f:facet id="CheckInDateFacet" name="header">Data inicio</f:facet>
            <h:outputText id="ParticipacaoCheckInDate" value="#{participacao.checkinDate}"/>
        </h:column>
        <h:column id="column5">
            <f:facet id="CheckOutDateFacet" name="header">Data fim</f:facet>
            <h:outputText id="ParticipacaoCheckOutDate" value="#{participacao.checkoutDate}"/>
        </h:column>
		<h:column id="column7">
			<f:facet id="ActionFacet" name="header">Action</f:facet>
			<h:commandLink id="cancel" value="Cancel" action="#{projetoUsuarioList.cancel}"/>
		</h:column>
	</h:dataTable>
  </h:form>
</div>

<div class="section">
	<h1>Projetos Concluidos</h1>
</div>


</ui:define>

<!-- sidebar -->
<ui:define name="sidebar">
<h1>Calendario</h1>
<div id="calendario"><img src="img/calendario1.jpg" alt="Calendario de Eventos"/></div>
<br/>
<p>
   Eventos de hoje
</p>
<p>
   Eventos seguintes
</p>
<p>
   Registrar Usuario
   <br/>
	<div class="notes"><s:link id="register" view="/register.xhtml" value="Registrar Novo Usuario"/></div>
</p>
</ui:define>

</ui:composition>
